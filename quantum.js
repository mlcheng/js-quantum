/***********************************************

  "quantum.js"

  Created by Michael Cheng on 02/04/2016 21:46
            http://michaelcheng.us/
            michael@michaelcheng.us
            --All Rights Reserved--

***********************************************/
"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iqwerty=iqwerty||{};iqwerty.binding=function(){function e(e,t){j[e]=t}function t(e){return j[e]}function n(e){e.hasOwnProperty(P.iqdb)||(e[P.iqdb]={})}function r(e,t){if(!e[P.iqdb].hasOwnProperty(t)){var n;e[P.iqdb][t]=(n={},_defineProperty(n,P.model,e[t]),_defineProperty(n,P.bindings,[]),_defineProperty(n,P.watchers,[]),n)}}function i(e,t,n){var r=e[P.iqdb][t];n.forEach(function(n){var i=r[P.bindings].find(function(e){return e[P.el]===n[P.el]});if(i){var a;n[P.attrs]=n[P.attrs].filter(function(e){return!~i[P.attrs].indexOf(e)}),(a=i[P.attrs]).push.apply(a,_toConsumableArray(n[P.attrs]))}else{r[P.bindings]=r[P.bindings].concat(n);var o=Object.keys(x).find(function(e){return Array.from(document.querySelectorAll(e)).some(function(e){return e===n[P.el]})});o&&x[o][P.changer].forEach(function(r){n[P.el].addEventListener(r,function(){e[t]=n[P.el][x[o][P.value]]})})}})}function a(e,t,n){var r,i=e[P.iqdb][t];i[P.watchers]=(r=i[P.watchers]).concat.apply(r,_toConsumableArray(n))}function o(e,t,n,r){n!==r&&e[P.iqdb][t][P.watchers].forEach(function(e){e(n,r)})}function c(e,t){try{Object.defineProperty(e,t,{get:function(){return e[P.iqdb][t][P.model]},set:function(n){var r=d(e,t);u(e,t,n),f(e,t,n),o(e,t,n,r)}})}catch(e){}}function d(e,t){return e[P.iqdb][t][P.model]}function u(e,t,n){e[P.iqdb][t][P.model]=n}function f(e,t,n){null==n&&(n=""),e[P.iqdb][t][P.bindings].forEach(function(e){e[P.attrs].forEach(function(t){var r=e[P.el];if(new RegExp(P.regex.dataset).test(t)){var i=t.replace(new RegExp(P.regex.dataset),"");r.dataset[i]!==n&&(r.dataset[i]=w(n))}else r[t]!==n&&(r[t]=w(n))})})}function l(e,t){return Array.from(t.querySelectorAll("*")).find(function(t){return!t.firstElementChild&&t.textContent===e})||t}function s(e){var t=new RegExp(P.regex.obj,"g"),n=e.innerHTML;n=n.replace(t,function(t){var n=l(t,e);return P.dataset.bindIncomplete.cc in n.dataset?t:"<span "+P.dataset.bindIncomplete.dash+">"+t+"</span>"}),e.innerHTML!==n&&(e.innerHTML=n)}function p(){var e=document.querySelectorAll("["+P.dataset.bindTo.dash+"]");Array.from(e).forEach(function(e){e.dataset[P.dataset.bindTo.cc].split(";").forEach(function(t){var n,r=t.split(":"),i=r[0].split(",");i=i.map(function(e){return e.trim()});var a=y(r[1],P.regex.variable),o=a.obj,c=a.prop;(o||c)&&h(o,c,(n={},_defineProperty(n,P.el,e),_defineProperty(n,P.attrs,i),n))})})}function b(){var e=document.querySelectorAll("["+P.dataset.bind.dash+"]:not(["+P.dataset.bindComplete.dash+"])"),t=function(e,t,n){var r;(e||t)&&(h(e,t,(r={},_defineProperty(r,P.el,n),_defineProperty(r,P.attrs,["innerHTML"]),r)),delete n.dataset[P.dataset.bindIncomplete.cc])};Array.from(e).forEach(function(e){if(s(e),""!==e.dataset[P.dataset.bind.cc]){var n=y(e.dataset[P.dataset.bind.cc],P.regex.variable),r=n.obj,i=n.prop;t(r,i,e)}e.dataset[P.dataset.bindComplete.cc]="true"}),e=document.querySelectorAll("["+P.dataset.bindIncomplete.dash+"]"),Array.from(e).forEach(function(e){var n=y(e.innerHTML,P.regex.obj),r=n.obj,i=n.prop;t(r,i,e)})}function y(e,n){var r=new RegExp(n,"g").exec(e),i=r[1].trim().split("."),a=t(i.shift()),o=a,c=void 0;return void 0!==a&&i.forEach(function(e,t){t<i.length-1?o=o[e]||o[P.iqdb][e][P.model]:c=e}),{obj:o,prop:c}}function h(e,t,o,u){o=Array.isArray(o)?o:E([o]),u=Array.isArray(u)?u:E([u]),n(e),r(e,t),i(e,t,o),a(e,t,u),c(e,t),f(e,t,d(e,t))}function m(e,t,n){h(e,t,null,n)}function g(t){Object.keys(t).forEach(function(n){e(n,t[n])}),"undefined"!=typeof document&&setTimeout(function(){p(),b()})}var v,q,A,_,P={iqdb:"__iqdb",model:"model",bindings:"bindings",watchers:"watchers",el:"el",attrs:"attrs",changer:"changer",value:"value",regex:{dataset:"^data-",variable:"([^{}]+)",obj:"{ *?([^{}]+) *?}"},dataset:{bindIncomplete:{cc:"iqBindIncomplete",dash:"data-iq-bind-incomplete"},bindTo:{cc:"iqBindTo",dash:"data-iq-bind-to"},bind:{cc:"iqBind",dash:"data-iq-bind"},bindComplete:{cc:"iqBindComplete",dash:"data-iq-bind-complete"}}},x={"input:not([type=checkbox])":(v={},_defineProperty(v,P.changer,["change","input"]),_defineProperty(v,P.value,"value"),v),"input[type=checkbox]":(q={},_defineProperty(q,P.changer,["change","input"]),_defineProperty(q,P.value,"checked"),q),textarea:(A={},_defineProperty(A,P.changer,["change","input"]),_defineProperty(A,P.value,"value"),A),"[contenteditable]":(_={},_defineProperty(_,P.changer,["change","input"]),_defineProperty(_,P.value,"textContent"),_)},E=function(e){return e.filter(function(e){return e})},w=function(e){return"string"==typeof e||"boolean"==typeof e?e:JSON.stringify(e,null,2)},j={};return{Bind:h,Watch:m,Model:g}}();
"use strict";var iqwerty=iqwerty||{};iqwerty.dragdrop=function(){function t(t){function n(){d.classList.add(e)}function i(){d.classList.remove(e)}function r(t){t.stopPropagation(),t.preventDefault(),n()}function o(t){t.stopPropagation(),t.preventDefault(),i()}function a(t){o(t);var e=t.target.files||t.dataTransfer.files;e=[].slice.call(e),"function"==typeof s&&s(e),e=null}window.File&&window.FileList&&window.FileReader||console.log("File upload not supported");var d=document.getElementById(t);d.addEventListener("dragover",r.bind(this)),d.addEventListener("dragleave",o.bind(this)),d.addEventListener("drop",a.bind(this));var s=null;return this.setOnDropCallback=function(t){s=t},this}var e="iqwerty_dragdrop_over";return{DragDrop:t}}();
"use strict";var iqwerty=iqwerty||{};iqwerty.history=function(){function t(t,n){this.state=t,this.$$length=n}function n(t,n,e){var i=s()+(h===c?c:"")+t;if(n=n||document.title,e=e||null,!window.history.pushState)throw new Error("History API not supported");a()!==t&&(window.history.pushState(e,n,i),r())}function e(){window.history.back()}function i(t,n){n&&(h=n.base),Object.keys(t).forEach(function(n){l[n]=t[n]}),r(),window.addEventListener("popstate",function(){r()})}function r(){var t=o(l);if(t){var n=t.state.split(":")[0];n=a().split(n)[1],l[t.state](n||void 0)}}function o(n){var e=Object.keys(n).map(function(n){if(""===n)return new t(n,0);var e=n.split(":")[0];return new t(n,0===a().indexOf(e)?e.length:-1)}).reduce(function(t,n){return-1===t.$$length?null:t.$$length>=n.$$length?t:n});return a()&&-1===e.$$length?(console.warn("Current state is unhandled"),null):e}function u(){return window.location.pathname}function s(){return h===c?u():h}function a(){var t;return h===c?(t=window.location.hash,t=t.split(c)[1]):t=u().split(s())[1],t?("/"===t.substr(-1)&&(t=t.substring(0,t.length-1)),t):""}var c="#!/",l={},h=c;return{Push:n,Pop:e,States:i}}();
"use strict";function $http(t){function n(t,n,s){var i,c=new XMLHttpRequest;if(t===e.GET?(n=function(t,n){if(!n)return t;var e=t+"?",o=0;for(var r in n)n.hasOwnProperty(r)&&(o++&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(n[r]));return e}(n,s),i=null):s&&(i=new FormData,Object.keys(s).forEach(function(t){i.append(t,s[t])})),t===e.GET){var a=iqwerty.http.Cache().getCache(n);if(null!=a)return"function"==typeof r.onLoad?r.onLoad(a):Promise.resolve(a)}return"function"==typeof r.onLoadStart&&(c.onloadstart=function(){r.onLoadStart(this.readyState)}),"function"==typeof r.onProgress&&(c.upload.onprogress=function(t){r.onProgress(t)}),new Promise(function(s,a){"function"==typeof r.onError&&(c.onerror=function(){r.onError(this.status),a(this.status)}),c.onload=function(){u.cache&&t===e.GET&&iqwerty.http.Cache().setCache(n,this.response),"function"==typeof r.onLoad&&(this.status===o.OK?r.onLoad(this.response):"function"==typeof r.onError&&r.onError(this.status)),this.status===o.OK?s(this.response):a(this.status)},c.open(t,n,!0),c.send(i)})}var e={GET:"get",POST:"post",PUT:"put",DELETE:"delete"},o={OK:200},r={},u={};return{cache:function(){return u.cache=!0,this},begin:function(t){return r.onLoadStart=t,this},progress:function(t){return r.onProgress=t,this},success:function(t){return r.onLoad=t,this},error:function(t){return r.onError=t,this},get:function(o){return n(e.GET,t,o)},post:function(o){return n(e.POST,t,o)},put:function(o){return n(e.PUT,t,o)},delete:function(o){return n(e.DELETE,t,o)}}}var iqwerty=iqwerty||{};iqwerty.http=function(){function t(){var n={},e=t.prototype.cached;return n.getCache=function(t){return e[t]},n.setCache=function(t,o){null==n.getCache(t)&&(e[t]=o)},n}return t.prototype.cached={},{Request:$http,Cache:t}}(),"undefined"!=typeof module&&(module.exports=iqwerty.http);
"use strict";var iqwerty=iqwerty||{};iqwerty.template=function(){function t(t){var e=t.split(".");if(1===e.length)return window[t];var n=window[e.shift()],r=e.pop();return n=e.reduce(function(t,e){return t[e]},n),n[r]}function e(){setTimeout(function(){var e=document.querySelectorAll("["+r+"]");[].slice.call(e).forEach(function(e){var r=e.dataset.iqTemplateSrc,i=e.dataset.iqTemplateLoaded;i=t(i),n(r,i,e)})})}function n(t,e,n){if("undefined"==typeof $http)return console.log("The $http library is required. Get it here https://github.com/mlcheng/js-http");$http(t).cache().get().then(function(t){n&&n.insertAdjacentHTML("afterbegin",t),"function"==typeof e?e(t):null!=e&&console.error("Your callback is not defined")}).catch(function(){return console.warn("Could not retrieve template")})}var r="data-iq-template-src";return{GetTemplates:e,GetTemplate:n}}(),document.addEventListener("DOMContentLoaded",iqwerty.template.GetTemplates);
"use strict";var iqwerty=iqwerty||{};iqwerty.toast=function(){function t(o,r,i){if(null!==e())t.prototype.toastQueue.push({text:o,options:r,transitions:i});else{t.prototype.Transitions=i||n;var a=r||{};a=t.prototype.mergeOptions(t.prototype.DEFAULT_SETTINGS,a),t.prototype.show(o,a),a=null}}function e(){return i}function o(t){i=t}var r=400,n={SHOW:{"-webkit-transition":"opacity "+r+"ms, -webkit-transform "+r+"ms",transition:"opacity "+r+"ms, transform "+r+"ms",opacity:"1","-webkit-transform":"translateY(-100%) translateZ(0)",transform:"translateY(-100%) translateZ(0)"},HIDE:{opacity:"0","-webkit-transform":"translateY(150%) translateZ(0)",transform:"translateY(150%) translateZ(0)"}},i=null;return t.prototype.DEFAULT_SETTINGS={style:{main:{background:"rgba(0, 0, 0, .85)","box-shadow":"0 0 10px rgba(0, 0, 0, .8)","border-radius":"3px","z-index":"99999",color:"rgba(255, 255, 255, .9)",padding:"10px 15px","max-width":"60%",width:"100%","word-break":"keep-all",margin:"0 auto","text-align":"center",position:"fixed",left:"0",right:"0",bottom:"0","-webkit-transform":"translateY(150%) translateZ(0)",transform:"translateY(150%) translateZ(0)","-webkit-filter":"blur(0)",opacity:"0"}},settings:{duration:4e3}},t.prototype.Transitions={},t.prototype.toastQueue=[],t.prototype.timeout=null,t.prototype.mergeOptions=function(e,o){var r=o;for(var n in e)r.hasOwnProperty(n)?null!==e[n]&&e[n].constructor===Object&&(r[n]=t.prototype.mergeOptions(e[n],r[n])):r[n]=e[n];return r},t.prototype.generate=function(r,n){var i=document.createElement("div");"string"==typeof r&&(r=document.createTextNode(r)),i.appendChild(r),o(i),i=null,t.prototype.stylize(e(),n)},t.prototype.stylize=function(t,e){Object.keys(e).forEach(function(o){t.style[o]=e[o]})},t.prototype.show=function(o,r){this.generate(o,r.style.main);var n=e();document.body.insertBefore(n,document.body.firstChild),n.offsetHeight,t.prototype.stylize(n,t.prototype.Transitions.SHOW),n=null,clearTimeout(t.prototype.timeout),t.prototype.timeout=setTimeout(t.prototype.hide,r.settings.duration)},t.prototype.hide=function(){var o=e();t.prototype.stylize(o,t.prototype.Transitions.HIDE),clearTimeout(t.prototype.timeout),o.addEventListener("transitionend",t.prototype.animationListener),o=null},t.prototype.animationListener=function(){e().removeEventListener("transitionend",t.prototype.animationListener),t.prototype.destroy.call(this)},t.prototype.destroy=function(){var r=e();if(document.body.removeChild(r),r=null,o(null),t.prototype.toastQueue.length>0){var n=t.prototype.toastQueue.shift();t(n.text,n.options,n.transitions),n=null}},{Toast:t}}(),"undefined"!=typeof module&&(module.exports=iqwerty.toast);
"use strict";var iqwerty=iqwerty||{};iqwerty.snackbar=function(){function t(o,n,r,a){var i=a||{};i=t.prototype.mergeOptions(t.prototype.DEFAULT_SETTINGS,i);var c=t.prototype.configureAction(o,n,r,i.style.cta);iqwerty.toast.Toast.call(this,c,i,e),c=null,i=null}var e={SHOW:{transition:"opacity 400ms",opacity:"1"},HIDE:{opacity:"0"}};return t.prototype=Object.create(iqwerty.toast.Toast.prototype),t.prototype.DEFAULT_SETTINGS={style:{main:{position:"fixed",left:"0",right:"0",bottom:"0",margin:"0","max-width":"600px",background:"#212121",color:"#e0e0e0","box-shadow":"none","border-radius":"0",padding:".8em",display:"flex","flex-flow":"row nowrap","align-items":"center","justify-content":"space-between","text-align":"left",opacity:"0","-webkit-transform":"none",transform:"none"},cta:{color:"#f48fb1","letter-spacing":"1px","text-transform":"uppercase",margin:"0 1em",cursor:"pointer"}},settings:{duration:1e4}},t.prototype.configureAction=function(e,o,n,r){var a=this,i=document.createDocumentFragment();i.appendChild(document.createTextNode(e));var c=document.createElement("span");return t.prototype.stylize(c,r),c.addEventListener("click",function(){a.hide(),a=null,n()}),c.appendChild(document.createTextNode(o)),i.appendChild(c),i},{Snackbar:t}}();